<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tutorial</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      padding: 20px;
      background-color: #f9f9f9;
    }

    h1, h2, h3 {
      color: #333;
    }

    .plant-info {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }

    .plant-info img {
      width: 60px;
      height: 60px;
      margin-right: 20px;
    }

    .memory-game {
      display: grid;
      grid-template-columns: repeat(4, 100px);
      gap: 10px;
      justify-content: center;
      margin-top: 30px;
    }

    .card {
      width: 100px;
      height: 100px;
      background-color: #4CAF50; /* Fundo verde */
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: pointer;
      font-size: 0;
    }

    .card img {
      display: none;
      width: 80%;
      height: 80%;
    }

    .card.flipped img {
      display: block;
    }
  </style>
</head>
<body>
  <h1>Tutorial</h1>
  <h2>Plantas e Valores</h2>
  <div class="plant-info">
    <img src="https://png.pngtree.com/png-clipart/20220124/original/pngtree-cartoon-golden-plump-wheat-ears-png-image_7182394.png" alt="Trigo">
    <p>Trigo: Compra por 20, vende por 35. Cresce em 10 segundos.</p>
  </div>
  <div class="plant-info">
    <img src="https://png.pngtree.com/png-vector/20240831/ourmid/pngtree-corn-design-png-image_13694493.png" alt="Milho">
    <p>Milho: Compra por 40, vende por 80. Cresce em 20 segundos.</p>
  </div>
  <div class="plant-info">
    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRvBHBJUkbjpNLu0mHT4Cav6w8cUe9-1YGncg&s" alt="Framboesa">
    <p>Framboesa: Compra por 200, vende por 450. Cresce em 1 minuto.</p>
  </div>
  <div class="plant-info">
    <img src="https://png.pngtree.com/png-vector/20231114/ourmid/pngtree-strawberry-background-diet-strawberries-png-image_10471262.png" alt="Morango">
    <p>Morango: Compra por 1000, vende por 2500. Cresce em 3 minutos.</p>
  </div>
  <div class="plant-info">
    <img src="https://png.pngtree.com/png-vector/20240801/ourmid/pngtree-red-apple-with-leaf---fresh-fruit-clipart-illustration-png-image_13331189.png" alt="Maçã">
    <p>Maçã: Compra por 2500, vende por 6000. Cresce em 5 minutos.</p>
  </div>
  <div class="plant-info">
    <img src="https://png.pngtree.com/png-clipart/20230930/original/pngtree-big-green-apple-png-image_13022349.png" alt="Maçã Verde">
    <p>Maçã Verde: Compra por 12.000, vende por 50.000. Cresce em 12 minutos.</p>
  </div>

  <h2>Ladrões</h2>
  <p>Os ladrões aparecem dependendo das plantas que você tiver. Clique neles para ganhar 280 moedas, mas se você não clicar rápido, eles roubam uma planta!</p>

  <h2>adubo</h2>
  <p>se vc zerar o minigame daqui vc pode ganhar ate 3 adubos q durante 5 minutos reduz em 50% o tempo de crescimento das plantas (dependendo do seu recorde vc pode amarzenar de 5 a 8 adubos)</p>

    <h2>Segurancas (brasilball)</h2>
  <p>te da 50 moedas por seguranca a cada 1 minuto e meio mas caso vc tenha os 5 seguranças eles vao produzir as moedas 30% mais rapidamente</p>

  <h2>Minigame: Jogo da Memória</h2>
  <div id="memory-game" class="memory-game"></div>

<!-- Botão centralizado para voltar ao index.html -->
<div style="display: flex; justify-content: center; margin-top: 40px;">
  <a href="index.html" style="text-decoration: none;">
    <button style="
      background-color: rgb(7, 14, 255);
      color: white;
      padding: 20px 40px;
      font-size: 24px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 15px;
    ">
      <img src="https://png.pngtree.com/png-vector/20240801/ourmid/pngtree-red-apple-with-leaf---fresh-fruit-clipart-illustration-png-image_13331189.png" 
           alt="Maçã" 
           style="width: 40px; height: 40px;">
      Voltar ao Jogo
    </button>
  </a>
</div>



  <script>
    // Dados do jogo da memória
    const images = [
      'https://png.pngtree.com/png-clipart/20220124/original/pngtree-cartoon-golden-plump-wheat-ears-png-image_7182394.png',
      'https://png.pngtree.com/png-vector/20240831/ourmid/pngtree-corn-design-png-image_13694493.png',
      'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRvBHBJUkbjpNLu0mHT4Cav6w8cUe9-1YGncg&s',
      'https://png.pngtree.com/png-vector/20231114/ourmid/pngtree-strawberry-background-diet-strawberries-png-image_10471262.png',
      'https://png.pngtree.com/png-vector/20240801/ourmid/pngtree-red-apple-with-leaf---fresh-fruit-clipart-illustration-png-image_13331189.png',
      'https://png.pngtree.com/png-clipart/20230930/original/pngtree-big-green-apple-png-image_13022349.png',
    ];

    const gameContainer = document.getElementById('memory-game');
    let flippedCards = [];
    let matchedCards = [];
    const memoryStartTime = Date.now();

    // Cria as cartas
    function createMemoryCards() {
      const cards = [...images, ...images]; // Duas de cada imagem
      cards.sort(() => 0.5 - Math.random()); // Embaralha

      cards.forEach((src) => {
        const card = document.createElement('div');
        card.classList.add('card');
        card.dataset.image = src;

        const img = document.createElement('img');
        img.src = src;
        card.appendChild(img);

        card.addEventListener('click', () => flipCard(card));
        gameContainer.appendChild(card);
      });
    }

    // Vira a carta
    function flipCard(card) {
      if (flippedCards.length === 2 || matchedCards.includes(card)) return;

      card.classList.add('flipped');
      flippedCards.push(card);

      if (flippedCards.length === 2) {
        checkMatch();
      }
    }

    // Verifica se houve um match
    function checkMatch() {
    const [card1, card2] = flippedCards;
    if (card1.dataset.image === card2.dataset.image) {
      matchedCards.push(card1, card2);
      flippedCards = [];
      // Se todas as cartas foram acertadas, o jogo acabou:
      if (matchedCards.length === images.length * 2) {
        // Aguarda um pequeno tempo e chama a função de conclusão
        setTimeout(onMemoryGameComplete, 500);
      }
    } else {
      setTimeout(() => {
        card1.classList.remove('flipped');
        card2.classList.remove('flipped');
        flippedCards = [];
      }, 1000);
    }
    }

function onMemoryGameComplete() {
    const memoryEndTime = Date.now();
    const timeElapsed = (memoryEndTime - memoryStartTime) / 1000; // tempo em segundos
    let aduboAward = 0;

    // Critérios de premiação:
    // Se zerar em menos de 30 segundos e acertar todas as cartas => 3 adubos
    if (timeElapsed < 30 && matchedCards.length === (images.length * 2)) {
      aduboAward = 3;
    }
    // Se zerar em menos de 1 minuto e 30 segundos => 2 adubos
    else if (timeElapsed < 90) {
      aduboAward = 2;
    }
    // Se zerar em menos de 4 minutos => 1 adubo
    else if (timeElapsed < 240) {
      aduboAward = 1;
    }
    
    // Obtém o total atual de adubos do localStorage (ou 0 se não houver)
    let aduboAtual = parseInt(localStorage.getItem('adubo')) || 0;
    // Recupera o highscore
let highscore = parseInt(localStorage.getItem('highscore')) || 0;

// Função que define o limite de adubos com base no highscore
function getAduboLimit(highscore) {
  if (highscore <= 300000) return 5;
  else if (highscore <= 500000) return 6;
  else if (highscore <= 750000) return 7;
  else return 8;
}

let aduboMaximo = getAduboLimit(highscore);
aduboAtual = Math.min(aduboAtual + aduboAward, aduboMaximo);
    
    // Atualiza o localStorage
    localStorage.setItem('adubo', aduboAtual);
    
    alert(`Você completou o minigame em ${timeElapsed.toFixed(2)} segundos e ganhou ${aduboAward} adubo(s)! Total de adubos: ${aduboAtual}`);
  }




    createMemoryCards();
  </script>
</body>
</html>
